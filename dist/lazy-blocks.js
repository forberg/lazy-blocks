!function(e,t){"function"==typeof define&&define.amd?define([],t):"function"==typeof exports?module.exports=t():window[e]=t()}("LazyBlocks",function(){"use strict";function e(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)})(e)}function t(e,t){return e.bind?e.bind(t):function(e,t){return e.apply(t,arguments)}}function n(e,t,o){(n=e.addEventListener?function(e,t,n){return e.addEventListener(t,n,!1)}:function(e,t,n){return e.attachEvent("on"+t,n)})(e,t,o)}function o(e,t,n){var o=!1;return function(){o||(e.apply(n),o=!0,setTimeout(function(){o=!1},t))}}function i(e){var t,n=0;do t=e.childNodes[n];while(8!=t.nodeType&&n<e.childNodes.length);if(8===t.nodeType){var o=document.createElement("div"),i=t.nodeValue;o.innerHTML=i,o=o.childNodes[0],e.parentNode.replaceChild(o,e)}}function l(n){this.element=n.element,this.threshold=n.threshold,this.aboveTheFold=n.aboveTheFold,this.callback=n.callback?t(e,null,t(n.callback,null,n.element)):t(e,null,t(i,null,n.element))}function s(e){var i,s=e.elements;for(this.loaders={},this.options={threshold:e.threshold||100,throttle:e.throttle||500,aboveTheFold:e.aboveTheFold||!1,callback:e.callback},"undefined"==typeof s.length&&(s=[s]),i=s.length-1;i>=0;i--)this.loaders[h++]=new l({element:s[i],aboveTheFold:this.options.aboveTheFold,threshold:this.options.threshold,callback:this.options.callback});n(window,"scroll",o(t(this.execute,this),this.options.throttle))}var h=0;return l.prototype={visible:function(e){var t=this.element.getBoundingClientRect().top,n=t.top+this.element.clientHeight+this.threshold;return e+window.innerHeight>=t.top-this.threshold&&(n>=e||this.aboveTheFold===!0)}},s.prototype={execute:function(){var e,t=window.scrollY;for(e in this.loaders)this.loaders[e].visible(t)&&(this.loaders[e].callback(),delete this.loaders[e]);return this},detach:function(){var e;for(e in this.loaders)this.loaders[e].callback(),delete this.loaders[e];return this},addElement:function(e,t){return t=t||{},this.loaders[h++]=new l({element:e,aboveTheFold:t.aboveTheFold||this.options.aboveTheFold,threshold:t.threshold||this.options.threshold,callback:t.callback||this.options.callback}),this}},s});