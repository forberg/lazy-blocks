!function(e,t){"function"==typeof define&&define.amd?define([],t):"function"==typeof exports?module.exports=t():window[e]=t()}("LazyBlocks",function(){"use strict";function e(e){return function(){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)})(e)}}function t(e,t){var o=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,o)}}function o(e,t,n){(o=e.addEventListener?function(e,t,o){return e.addEventListener(t,o,!1)}:function(e,t,o){return e.attachEvent("on"+t,o)})(e,t,n)}function n(e,t,o){var n=!1;return function(){n||(e.apply(o),n=!0,setTimeout(function(){n=!1},t))}}function i(e){var t,o=0;do t=e.childNodes[o],o++;while(8!=t.nodeType&&o<e.childNodes.length);if(8===t.nodeType){var n=document.createElement("div"),i=t.nodeValue;n.innerHTML=i,n=n.childNodes[0],e.parentNode.replaceChild(n,e)}}function l(o){this.element=o.element,this.threshold=o.threshold,this.aboveTheFold=o.aboveTheFold,this.callback=e(o.callback?t(o.callback,null,this.element):t(i,null,this.element))}function s(e){var i,s=e.elements;for(this.loaders={},this.options={threshold:e.threshold||100,throttle:e.throttle||500,aboveTheFold:e.aboveTheFold||!1,callback:e.callback},"undefined"==typeof s.length&&(s=[s]),i=s.length-1;i>=0;i--)this.loaders[r++]=new l({element:s[i],aboveTheFold:this.options.aboveTheFold,threshold:this.options.threshold,callback:this.options.callback});o(window,"scroll",n(t(this.execute,this),this.options.throttle))}var r=0;return l.prototype={visible:function(e){var t=this.element.getBoundingClientRect();return t.top-window.innerHeight-this.threshold<=0&&(t.bottom+this.threshold>=0||this.aboveTheFold===!0)}},s.prototype={execute:function(){var e,t=window.scrollY;for(e in this.loaders)this.loaders[e].visible(t)&&(this.loaders[e].callback(),delete this.loaders[e]);return this},detach:function(){var e;for(e in this.loaders)this.loaders[e].callback(),delete this.loaders[e];return this},addElement:function(e,t){return t=t||{},this.loaders[r++]=new l({element:e,aboveTheFold:t.aboveTheFold||this.options.aboveTheFold,threshold:t.threshold||this.options.threshold,callback:t.callback||this.options.callback}),this}},s});